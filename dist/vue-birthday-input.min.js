!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("moment")):"function"==typeof define&&define.amd?define("VueBirthdayInput",["moment"],e):"object"==typeof exports?exports.VueBirthdayInput=e(require("moment")):t.VueBirthdayInput=e(t.moment)}(this,function(t){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),o={install:function(t){t.component(r.a.name,r.a)}};r.a.install=o.install,e.default=r.a},function(t,e,n){"use strict";var r=n(3),o=n(5),i=n(2),a=i(r.a,o.a,!1,null,null,null);e.a=a.exports},function(t,e){t.exports=function(t,e,n,r,o,i){var a,s=t=t||{},u=typeof t.default;"object"!==u&&"function"!==u||(a=t,s=t.default);var d="function"==typeof s?s.options:s;e&&(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0),n&&(d.functional=!0),o&&(d._scopeId=o);var l;if(i?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(i)},d._ssrRegister=l):r&&(l=r),l){var c=d.functional,f=c?d.render:d.beforeCreate;c?(d._injectStyles=l,d.render=function(t,e){return l.call(e),f(t,e)}):d.beforeCreate=f?[].concat(f,l):[l]}return{esModule:a,exports:s,options:d}}},function(t,e,n){"use strict";var r=n(4),o=n.n(r);e.a={name:"vue-birthday-input",props:{placeholder:{default:"出生日期",type:String},format:{default:"YYYYMMDD",type:String},formatView:{default:"yyyy年mm月dd日",type:String},value:{default:"",required:!0,type:[Number,String]}},data:function(){return{birthday:"",pos:0,elementId:""}},computed:{},methods:{onFocusHandler:function(t){this.$emit("focus",t);var e=this.pos;this.birthday&&this.birthday!=this.formatView||(this.birthday=this.formatView,e=0,this.setCaretPosition(e))},onMouseoverHandel:function(){this.birthday||(this.birthday=this.formatView)},onMouseoutHandel:function(){this.birthday==this.formatView&&(this.birthday="")},getCursortPosition:function(){var t=document.getElementById(this.elementId),e=0;if(document.selection){var n=document.selection.createRange();n.moveStart("character",-t.value.length),e=n.text.length}else(t.selectionStart||"0"==t.selectionStart)&&(e=t.selectionStart);return e},setCaretPosition:function(t){var e=document.getElementById(this.elementId);if(e.setSelectionRange)setTimeout(function(){e.setSelectionRange(t,t)},0);else if(e.createTextRange){var n=e.createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select()}},onDeleteHander:function(){this.birthday=this.dobFormat(this.birthday,!0)},dobFormat:function(t,e){t+="";var n=t.replace(/[^0-9]/gi,"");if(n.length>8)return!1;e&&(n=n.substring(0,n.length-1));for(var r=this.formatView.split(""),i=0,a=0,s="",u="",d="",l=0;l<r.length;l++){var c=r[l];if(c=c.toLowerCase(),c.match(/y|m|d/)){if(!n[i])return this.setCaretPosition(a),r.join("");if(a++,r[l]=n[i],"y"==c&&(s+=n[i],1!=s[0]&&2!=s[0]))return!1;if("m"==c){if(u+=n[i],0!=u[0]&&1!=u[0])return!1;if(2==u.length&&"Invalid date"==o()(u,"MM").format("MM"))return!1}if("d"==c)if(d+=n[i],1==d.length){if(0!=d&&"Invalid date"==o()(s+u+d+"0","YYYYMMDD").format("YYYYMMDD"))return!1}else if("Invalid date"==o()(s+u+d,"YYYYMMDD").format("YYYYMMDD"))return!1;i++}else a++}return 8==n.length?(n=s+u+d+"",n=o()(n,"YYYYMMDD").format(this.format),this.$emit("input",n)):this.$emit("input",""),r.join("")}},watch:{birthday:function(t,e){if(console.log(t,e),t!==e){if(t===this.formatView||!t)return;var n=this.dobFormat(t);this.birthday=n||e}}},mounted:function(){this.elementId="vueBirthdayInput_"+Math.round(1e6*Math.random());var t=this.dobFormat(this.value);t!=this.formatView&&(this.birthday=t)}}},function(e,n){e.exports=t},function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",{directives:[{name:"model",rawName:"v-model",value:t.birthday,expression:"birthday"}],attrs:{id:t.elementId,placeholder:t.placeholder},domProps:{value:t.birthday},on:{focus:t.onFocusHandler,click:t.onFocusHandler,mouseover:t.onMouseoverHandel,mouseout:t.onMouseoutHandel,keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"delete",[8,46],e.key))return null;t.onDeleteHander(e)},input:function(e){e.target.composing||(t.birthday=e.target.value)}}})},o=[],i={render:r,staticRenderFns:o};e.a=i}])});